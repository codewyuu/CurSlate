"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5136],{37234:e=>{const s=new Set([200,203,204,206,300,301,308,404,405,410,414,501]),t=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),i=new Set([500,502,503,504]),r={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},a={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function h(e){const s=parseInt(e,10);return isFinite(s)?s:0}function c(e){const s={};if(!e)return s;const t=e.trim().split(/,/);for(const e of t){const[t,i]=e.split(/=/,2);s[t.trim()]=void 0===i||i.trim().replace(/^"|"$/g,"")}return s}function n(e){let s=[];for(const t in e){const i=e[t];s.push(!0===i?t:t+"="+i)}if(s.length)return s.join(", ")}e.exports=class{constructor(e,s,{shared:t,cacheHeuristic:i,immutableMinTimeToLive:r,ignoreCargoCult:a,_fromObject:h}={}){if(h)this._fromObject(h);else{if(!s||!s.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(e),this._responseTime=this.now(),this._isShared=!1!==t,this._cacheHeuristic=void 0!==i?i:.1,this._immutableMinTtl=void 0!==r?r:864e5,this._status="status"in s?s.status:200,this._resHeaders=s.headers,this._rescc=c(s.headers["cache-control"]),this._method="method"in e?e.method:"GET",this._url=e.url,this._host=e.headers.host,this._noAuthorization=!e.headers.authorization,this._reqHeaders=s.headers.vary?e.headers:null,this._reqcc=c(e.headers["cache-control"]),a&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":n(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),null==s.headers["cache-control"]&&/no-cache/.test(s.headers.pragma)&&(this._rescc["no-cache"]=!0)}}now(){return Date.now()}storable(){return!(this._reqcc["no-store"]||!("GET"===this._method||"HEAD"===this._method||"POST"===this._method&&this._hasExplicitExpiration())||!t.has(this._status)||this._rescc["no-store"]||this._isShared&&this._rescc.private||this._isShared&&!this._noAuthorization&&!this._allowsStoringAuthenticated()||!(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||s.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(e){if(!e||!e.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(e){this._assertRequestHasHeaders(e);const s=c(e.headers["cache-control"]);return!s["no-cache"]&&!/no-cache/.test(e.headers.pragma)&&(!(s["max-age"]&&this.age()>s["max-age"])&&(!(s["min-fresh"]&&this.timeToLive()<1e3*s["min-fresh"])&&(!(this.stale()&&(!s["max-stale"]||this._rescc["must-revalidate"]||!(!0===s["max-stale"]||s["max-stale"]>this.age()-this.maxAge())))&&this._requestMatches(e,!1))))}_requestMatches(e,s){return(!this._url||this._url===e.url)&&this._host===e.headers.host&&(!e.method||this._method===e.method||s&&"HEAD"===e.method)&&this._varyMatches(e)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(e){if(!this._resHeaders.vary)return!0;if("*"===this._resHeaders.vary)return!1;const s=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(const t of s)if(e.headers[t]!==this._reqHeaders[t])return!1;return!0}_copyWithoutHopByHopHeaders(e){const s={};for(const t in e)r[t]||(s[t]=e[t]);if(e.connection){const t=e.connection.trim().split(/\s*,\s*/);for(const e of t)delete s[e]}if(s.warning){const e=s.warning.split(/,/).filter((e=>!/^\s*1[0-9][0-9]/.test(e)));e.length?s.warning=e.join(",").trim():delete s.warning}return s}responseHeaders(){const e=this._copyWithoutHopByHopHeaders(this._resHeaders),s=this.age();return s>86400&&!this._hasExplicitExpiration()&&this.maxAge()>86400&&(e.warning=(e.warning?`${e.warning}, `:"")+'113 - "rfc7234 5.5.4"'),e.age=`${Math.round(s)}`,e.date=new Date(this.now()).toUTCString(),e}date(){const e=Date.parse(this._resHeaders.date);return isFinite(e)?e:this._responseTime}age(){return this._ageValue()+(this.now()-this._responseTime)/1e3}_ageValue(){return h(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"])return 0;if(this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable)return 0;if("*"===this._resHeaders.vary)return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return h(this._rescc["s-maxage"])}if(this._rescc["max-age"])return h(this._rescc["max-age"]);const e=this._rescc.immutable?this._immutableMinTtl:0,s=this.date();if(this._resHeaders.expires){const t=Date.parse(this._resHeaders.expires);return Number.isNaN(t)||t<s?0:Math.max(e,(t-s)/1e3)}if(this._resHeaders["last-modified"]){const t=Date.parse(this._resHeaders["last-modified"]);if(isFinite(t)&&s>t)return Math.max(e,(s-t)/1e3*this._cacheHeuristic)}return e}timeToLive(){const e=this.maxAge()-this.age(),s=e+h(this._rescc["stale-if-error"]),t=e+h(this._rescc["stale-while-revalidate"]);return 1e3*Math.max(0,e,s,t)}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+h(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+h(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(e){return new this(void 0,void 0,{_fromObject:e})}_fromObject(e){if(this._responseTime)throw Error("Reinitialized");if(!e||1!==e.v)throw Error("Invalid serialization");this._responseTime=e.t,this._isShared=e.sh,this._cacheHeuristic=e.ch,this._immutableMinTtl=void 0!==e.imm?e.imm:864e5,this._status=e.st,this._resHeaders=e.resh,this._rescc=e.rescc,this._method=e.m,this._url=e.u,this._host=e.h,this._noAuthorization=e.a,this._reqHeaders=e.reqh,this._reqcc=e.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(e){this._assertRequestHasHeaders(e);const s=this._copyWithoutHopByHopHeaders(e.headers);if(delete s["if-range"],!this._requestMatches(e,!0)||!this.storable())return delete s["if-none-match"],delete s["if-modified-since"],s;if(this._resHeaders.etag&&(s["if-none-match"]=s["if-none-match"]?`${s["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),s["accept-ranges"]||s["if-match"]||s["if-unmodified-since"]||this._method&&"GET"!=this._method){if(delete s["if-modified-since"],s["if-none-match"]){const e=s["if-none-match"].split(/,/).filter((e=>!/^\s*W\//.test(e)));e.length?s["if-none-match"]=e.join(",").trim():delete s["if-none-match"]}}else this._resHeaders["last-modified"]&&!s["if-modified-since"]&&(s["if-modified-since"]=this._resHeaders["last-modified"]);return s}revalidatedPolicy(e,s){if(this._assertRequestHasHeaders(e),this._useStaleIfError()&&function(e){return!e||i.has(e.status)}(s))return{modified:!1,matches:!1,policy:this};if(!s||!s.headers)throw Error("Response headers missing");let t=!1;if(void 0!==s.status&&304!=s.status?t=!1:s.headers.etag&&!/^\s*W\//.test(s.headers.etag)?t=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===s.headers.etag:this._resHeaders.etag&&s.headers.etag?t=this._resHeaders.etag.replace(/^\s*W\//,"")===s.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?t=this._resHeaders["last-modified"]===s.headers["last-modified"]:this._resHeaders.etag||this._resHeaders["last-modified"]||s.headers.etag||s.headers["last-modified"]||(t=!0),!t)return{policy:new this.constructor(e,s),modified:304!=s.status,matches:!1};const r={};for(const e in this._resHeaders)r[e]=e in s.headers&&!a[e]?s.headers[e]:this._resHeaders[e];const h=Object.assign({},s,{status:this._status,method:this._method,headers:r});return{policy:new this.constructor(e,h,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:!1,matches:!0}}}}}]);