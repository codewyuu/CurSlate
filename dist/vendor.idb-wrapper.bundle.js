/*! For license information please see vendor.idb-wrapper.bundle.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([[1122],{10196:function(e,t,r){var n;!function(){"use strict";void 0===(n=function(){var e=function(e){throw e},t=function(){},r={storeName:"Store",storePrefix:"IDBWrapper-",dbVersion:1,keyPath:"id",autoIncrement:!0,onStoreReady:function(){},onError:e,indexes:[],implementationPreference:["indexedDB","webkitIndexedDB","mozIndexedDB","shimIndexedDB"]},n=function(e,t){for(var n in void 0===t&&"function"==typeof e&&(t=e),"[object Object]"!=Object.prototype.toString.call(e)&&(e={}),r)this[n]=void 0!==e[n]?e[n]:r[n];this.dbName=this.storePrefix+this.storeName,this.dbVersion=parseInt(this.dbVersion,10)||1,t&&(this.onStoreReady=t);var o="object"==typeof window?window:self,i=this.implementationPreference.filter((function(e){return e in o}));this.implementation=i[0],this.idb=o[this.implementation],this.keyRange=o.IDBKeyRange||o.webkitIDBKeyRange||o.mozIDBKeyRange,this.consts={READ_ONLY:"readonly",READ_WRITE:"readwrite",VERSION_CHANGE:"versionchange",NEXT:"next",NEXT_NO_DUPLICATE:"nextunique",PREV:"prev",PREV_NO_DUPLICATE:"prevunique"},this.openDB()},o={constructor:n,version:"1.7.2",db:null,dbName:null,dbVersion:null,store:null,storeName:null,storePrefix:null,keyPath:null,autoIncrement:null,indexes:null,implementationPreference:null,implementation:"",onStoreReady:null,onError:null,_insertIdCount:0,openDB:function(){var e=this.idb.open(this.dbName,this.dbVersion),t=!1;e.onerror=function(e){if(function(e){return"error"in e.target?"VersionError"==e.target.error.name:"errorCode"in e.target&&12==e.target.errorCode}(e))this.onError(new Error("The version number provided is lower than the existing one."));else{var t;if(e.target.error)t=e.target.error;else{var r="IndexedDB unknown error occurred when opening DB "+this.dbName+" version "+this.dbVersion;"errorCode"in e.target&&(r+=" with error code "+e.target.errorCode),t=new Error(r)}this.onError(t)}}.bind(this),e.onsuccess=function(e){if(!t)if(this.db)this.onStoreReady();else if(this.db=e.target.result,"string"!=typeof this.db.version)if(this.db.objectStoreNames.contains(this.storeName)){var r=this.db.transaction([this.storeName],this.consts.READ_ONLY);this.store=r.objectStore(this.storeName);var n=Array.prototype.slice.call(this.getIndexList());this.indexes.forEach((function(e){var r=e.name;if(!r)return t=!0,void this.onError(new Error("Cannot create index: No index name given."));if(this.normalizeIndexData(e),this.hasIndex(r)){var o=this.store.index(r);this.indexComplies(o,e)||(t=!0,this.onError(new Error('Cannot modify index "'+r+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))),n.splice(n.indexOf(r),1)}else t=!0,this.onError(new Error('Cannot create new index "'+r+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))}),this),n.length&&(t=!0,this.onError(new Error('Cannot delete index(es) "'+n.toString()+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))),t||this.onStoreReady()}else this.onError(new Error("Object store couldn't be created."));else this.onError(new Error("The IndexedDB implementation in this browser is outdated. Please upgrade your browser."))}.bind(this),e.onupgradeneeded=function(e){if(this.db=e.target.result,this.db.objectStoreNames.contains(this.storeName))this.store=e.target.transaction.objectStore(this.storeName);else{var r={autoIncrement:this.autoIncrement};null!==this.keyPath&&(r.keyPath=this.keyPath),this.store=this.db.createObjectStore(this.storeName,r)}var n=Array.prototype.slice.call(this.getIndexList());this.indexes.forEach((function(e){var r=e.name;if(r||(t=!0,this.onError(new Error("Cannot create index: No index name given."))),this.normalizeIndexData(e),this.hasIndex(r)){var o=this.store.index(r);this.indexComplies(o,e)||(this.store.deleteIndex(r),this.store.createIndex(r,e.keyPath,{unique:e.unique,multiEntry:e.multiEntry})),n.splice(n.indexOf(r),1)}else this.store.createIndex(r,e.keyPath,{unique:e.unique,multiEntry:e.multiEntry})}),this),n.length&&n.forEach((function(e){this.store.deleteIndex(e)}),this)}.bind(this)},deleteDatabase:function(e,t){if(this.idb.deleteDatabase){this.db.close();var r=this.idb.deleteDatabase(this.dbName);r.onsuccess=e,r.onerror=t}else t(new Error("Browser does not support IndexedDB deleteDatabase!"))},put:function(r,n,o,i){null!==this.keyPath&&(i=o,o=n,n=r),i||(i=e),o||(o=t);var s,a=!1,u=null,c=this.db.transaction([this.storeName],this.consts.READ_WRITE);return c.oncomplete=function(){(a?o:i)(u)},c.onabort=i,c.onerror=i,null!==this.keyPath?(this._addIdPropertyIfNeeded(n),s=c.objectStore(this.storeName).put(n)):s=c.objectStore(this.storeName).put(n,r),s.onsuccess=function(e){a=!0,u=e.target.result},s.onerror=i,c},get:function(r,n,o){o||(o=e),n||(n=t);var i=!1,s=null,a=this.db.transaction([this.storeName],this.consts.READ_ONLY);a.oncomplete=function(){(i?n:o)(s)},a.onabort=o,a.onerror=o;var u=a.objectStore(this.storeName).get(r);return u.onsuccess=function(e){i=!0,s=e.target.result},u.onerror=o,a},remove:function(r,n,o){o||(o=e),n||(n=t);var i=!1,s=null,a=this.db.transaction([this.storeName],this.consts.READ_WRITE);a.oncomplete=function(){(i?n:o)(s)},a.onabort=o,a.onerror=o;var u=a.objectStore(this.storeName).delete(r);return u.onsuccess=function(e){i=!0,s=e.target.result},u.onerror=o,a},batch:function(r,n,o){if(o||(o=e),n||(n=t),"[object Array]"!=Object.prototype.toString.call(r))o(new Error("dataArray argument must be of type Array."));else if(0===r.length)return n(!0);var i=r.length,s=!1,a=!1,u=this.db.transaction([this.storeName],this.consts.READ_WRITE);u.oncomplete=function(){(a?n:o)(a)},u.onabort=o,u.onerror=o;var c=function(){0!=--i||s||(s=!0,a=!0)};return r.forEach((function(e){var t=e.type,r=e.key,n=e.value,i=function(e){u.abort(),s||(s=!0,o(e,t,r))};if("remove"==t){var a=u.objectStore(this.storeName).delete(r);a.onsuccess=c,a.onerror=i}else if("put"==t){var l;null!==this.keyPath?(this._addIdPropertyIfNeeded(n),l=u.objectStore(this.storeName).put(n)):l=u.objectStore(this.storeName).put(n,r),l.onsuccess=c,l.onerror=i}}),this),u},putBatch:function(e,t,r){var n=e.map((function(e){return{type:"put",value:e}}));return this.batch(n,t,r)},upsertBatch:function(r,n,o,i){"function"==typeof n&&(i=o=n,n={}),i||(i=e),o||(o=t),n||(n={}),"[object Array]"!=Object.prototype.toString.call(r)&&i(new Error("dataArray argument must be of type Array."));var s=n.keyField||this.keyPath,a=r.length,u=!1,c=!1,l=0,h=this.db.transaction([this.storeName],this.consts.READ_WRITE);h.oncomplete=function(){c?o(r):i(!1)},h.onabort=i,h.onerror=i;var d=function(e){r[l++][s]=e.target.result,0!=--a||u||(u=!0,c=!0)};return r.forEach((function(e){var t,r=e.key;null!==this.keyPath?(this._addIdPropertyIfNeeded(e),t=h.objectStore(this.storeName).put(e)):t=h.objectStore(this.storeName).put(e,r),t.onsuccess=d,t.onerror=function(e){h.abort(),u||(u=!0,i(e))}}),this),h},removeBatch:function(e,t,r){var n=e.map((function(e){return{type:"remove",key:e}}));return this.batch(n,t,r)},getBatch:function(r,n,o,i){if(o||(o=e),n||(n=t),i||(i="sparse"),"[object Array]"!=Object.prototype.toString.call(r))o(new Error("keyArray argument must be of type Array."));else if(0===r.length)return n([]);var s=[],a=r.length,u=!1,c=null,l=this.db.transaction([this.storeName],this.consts.READ_ONLY);l.oncomplete=function(){(u?n:o)(c)},l.onabort=o,l.onerror=o;var h=function(e){e.target.result||"dense"==i?s.push(e.target.result):"sparse"==i&&s.length++,0==--a&&(u=!0,c=s)};return r.forEach((function(e){var t=l.objectStore(this.storeName).get(e);t.onsuccess=h,t.onerror=function(e){c=e,o(e),l.abort()}}),this),l},getAll:function(r,n){n||(n=e),r||(r=t);var o=this.db.transaction([this.storeName],this.consts.READ_ONLY),i=o.objectStore(this.storeName);return i.getAll?this._getAllNative(o,i,r,n):this._getAllCursor(o,i,r,n),o},_getAllNative:function(e,t,r,n){var o=!1,i=null;e.oncomplete=function(){(o?r:n)(i)},e.onabort=n,e.onerror=n;var s=t.getAll();s.onsuccess=function(e){o=!0,i=e.target.result},s.onerror=n},_getAllCursor:function(e,t,r,n){var o=[],i=!1,s=null;e.oncomplete=function(){(i?r:n)(s)},e.onabort=n,e.onerror=n;var a=t.openCursor();a.onsuccess=function(e){var t=e.target.result;t?(o.push(t.value),t.continue()):(i=!0,s=o)},a.onError=n},clear:function(r,n){n||(n=e),r||(r=t);var o=!1,i=null,s=this.db.transaction([this.storeName],this.consts.READ_WRITE);s.oncomplete=function(){(o?r:n)(i)},s.onabort=n,s.onerror=n;var a=s.objectStore(this.storeName).clear();return a.onsuccess=function(e){o=!0,i=e.target.result},a.onerror=n,s},_addIdPropertyIfNeeded:function(e){void 0===e[this.keyPath]&&(e[this.keyPath]=this._insertIdCount+++Date.now())},getIndexList:function(){return this.store.indexNames},hasIndex:function(e){return this.store.indexNames.contains(e)},normalizeIndexData:function(e){e.keyPath=e.keyPath||e.name,e.unique=!!e.unique,e.multiEntry=!!e.multiEntry},indexComplies:function(e,t){return["keyPath","unique","multiEntry"].every((function(r){if("multiEntry"==r&&void 0===e[r]&&!1===t[r])return!0;if("keyPath"==r&&"[object Array]"==Object.prototype.toString.call(t[r])){var n=t.keyPath,o=e.keyPath;if("string"==typeof o)return n.toString()==o;if("function"!=typeof o.contains&&"function"!=typeof o.indexOf)return!1;if(o.length!==n.length)return!1;for(var i=0,s=n.length;i<s;i++)if(!(o.contains&&o.contains(n[i])||o.indexOf(-1!==n[i])))return!1;return!0}return t[r]==e[r]}))},iterate:function(t,r){var n="desc"==(r=s({index:null,order:"ASC",autoContinue:!0,filterDuplicates:!1,keyRange:null,writeAccess:!1,onEnd:null,onError:e,limit:1/0,offset:0,allowItemRejection:!1},r||{})).order.toLowerCase()?"PREV":"NEXT";r.filterDuplicates&&(n+="_NO_DUPLICATE");var o=!1,i=this.db.transaction([this.storeName],this.consts[r.writeAccess?"READ_WRITE":"READ_ONLY"]),a=i.objectStore(this.storeName);r.index&&(a=a.index(r.index));var u=0;i.oncomplete=function(){o?r.onEnd?r.onEnd():t(null):r.onError(null)},i.onabort=r.onError,i.onerror=r.onError;var c=a.openCursor(r.keyRange,this.consts[n]);return c.onerror=r.onError,c.onsuccess=function(e){var n=e.target.result;if(n)if(r.offset)n.advance(r.offset),r.offset=0;else{var s=t(n.value,n,i);r.allowItemRejection&&!1===s||u++,r.autoContinue&&(u+r.offset<r.limit?n.continue():o=!0)}else o=!0},i},query:function(e,t){var r=[],n=0;return(t=t||{}).autoContinue=!0,t.writeAccess=!1,t.allowItemRejection=!!t.filter,t.onEnd=function(){e(r,n)},this.iterate((function(e){n++;var o=!t.filter||t.filter(e);return!1!==o&&r.push(e),o}),t)},count:function(t,r){var n=(r=s({index:null,keyRange:null},r||{})).onError||e,o=!1,i=null,a=this.db.transaction([this.storeName],this.consts.READ_ONLY);a.oncomplete=function(){(o?t:n)(i)},a.onabort=n,a.onerror=n;var u=a.objectStore(this.storeName);r.index&&(u=u.index(r.index));var c=u.count(r.keyRange);return c.onsuccess=function(e){o=!0,i=e.target.result},c.onError=n,a},makeKeyRange:function(e){var t,r=void 0!==e.lower,n=void 0!==e.upper;switch(!0){case void 0!==e.only:t=this.keyRange.only(e.only);break;case r&&n:t=this.keyRange.bound(e.lower,e.upper,e.excludeLower,e.excludeUpper);break;case r:t=this.keyRange.lowerBound(e.lower,e.excludeLower);break;case n:t=this.keyRange.upperBound(e.upper,e.excludeUpper);break;default:throw new Error('Cannot create KeyRange. Provide one or both of "lower" or "upper" value, or an "only" value.')}return t}},i={};function s(e,t){var r,n;for(r in t)(n=t[r])!==i[r]&&n!==e[r]&&(e[r]=n);return e}return n.prototype=o,n.version=o.version,n}.call(t,r,t,e))||(e.exports=n)}()}}]);