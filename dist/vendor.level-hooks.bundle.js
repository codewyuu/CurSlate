(self.webpackChunk=self.webpackChunk||[]).push([[2986],{78068:(e,t,n)=>{var r=n(22980);e.exports=function(e){if(!e.hooks){var t=[],n=[];e.hooks={post:function(e,n){n||(n=e,e="");var o={test:r.checker(e),hook:n};return t.push(o),c(t,o)},pre:function(e,t){t||(t=e,e="");var o={test:r.checker(e),hook:t,safe:!1!==e.safe};return n.push(o),c(n,o)},posthooks:t,prehooks:n},e.on("put",(function(e,t){p({type:"put",key:e,value:t})})),e.on("del",(function(e,t){p({type:"del",key:e,value:t})})),e.on("batch",(function(e){e.forEach(p)}));var o=e.put,u=e.del,i=e.batch;e.put=function(e,t,n,r){return a(!1,[{key:e,value:t,type:"put"}],n,r)},e.del=function(e,t,n){return a(!1,[{key:e,type:"del"}],t,n)},e.batch=function(e,t,n){return a(!0,e,t,n)}}function f(e){return e&&("string"==typeof e?e:"string"==typeof e.prefix?e.prefix:"function"==typeof e.prefix?e.prefix():"")}function c(e,t){return function(){var n=e.indexOf(t);return!!~n&&(e.splice(n,1),!0)}}function p(e){e&&e.type&&t.forEach((function(t){t.test(e.key)&&t.hook(e)}))}function a(t,r,c,p){try{r.forEach((function e(t,o){n.forEach((function(n){if(n.test(String(t.key))){var u={add:function(t,u){if(void 0===t)return this;if(!1===t)return delete r[o];var i=f(t.prefix)||f(u)||n.prefix||"";if(i&&(t.prefix=i),t.key=i+t.key,n.safe&&n.test(String(t.key)))throw new Error("prehook cannot insert into own range");var c=t.keyEncoding||function(e){if(e&&e._getKeyEncoding)return e._getKeyEncoding(e)}(t.prefix),p=t.valueEncoding||function(e){if(e&&e._getValueEncoding)return e._getValueEncoding(e)}(t.prefix);return c&&(t.keyEncoding=c),p&&(t.valueEncoding=p),r.push(t),e(t,r.length-1),this},put:function(e,t){return"object"==typeof e&&(e.type="put"),this.add(e,t)},del:function(e,t){return"object"==typeof e&&(e.type="del"),this.add(e,t)},veto:function(){return this.add(!1)}};n.hook.call(u,t,u.add,r)}}))}))}catch(e){return(p||c)(e)}if(1==(r=r.filter((function(e){return e&&e.type}))).length&&!t){var a=r[0];return"put"==a.type?o.call(e,a.key,a.value,c,p):u.call(e,a.key,c,p)}return i.call(e,r,c,p)}}}}]);